<!DOCTYPE html>
<html>
  <head>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <meta name="tipo_contenido" content="text/html;" http-equiv="content-type" charset="utf-8">
	<title>Preguntas</title>
    <link rel='stylesheet' type='text/css' href='estilos/style.css' />
	<link rel='stylesheet' 
		   type='text/css' 
		   media='only screen and (min-width: 530px) and (min-device-width: 481px)'
		   href='estilos/wide.css' />
	<link rel='stylesheet' 
		   type='text/css' 
		   media='only screen and (max-width: 480px)'
		   href='estilos/smartphone.css' />
  </head>
  <script type="text/javascript"> function crear_img(){
	if(document.getElementById("archivo").value!=""){
		if(document.getElementById("imagen")==null){
			var variable= document.createElement("P");  
			variable.setAttribute('align','center');
			variable.setAttribute('id','img');
			var vari= document.createElement("IMG");  
			vari.name="imagen";
			vari.id="imagen";
			vari.setAttribute('height','200px');
			vari.setAttribute('width','200px');
			var foto=document.getElementById("up").value;
			vari.src=foto;
			variable.appendChild(vari);
			document.body.insertBefore(variable,document.getElementById("registro")); 
			
		}else{
		
			document.getElementById("imagen").src=document.getElementById("up").value;
		}
	}
	return true;
		
}
</script>
  <body>
  <div id='page-wrap'>
	<header class='main' id='h1'>
		<span class="right"><a href="registro">Registrarse</a></span>
      		<span class="right"><a href="login">Login</a></span>
      		<span class="right" style="display:none;"><a href="/logout">Logout</a></span>
		<h2>Quiz: el juego de las preguntas</h2>
    </header>
	<nav class='main' id='n1' role='navigation'>
		<span><a href='layout.html'>Inicio</a></spam>
		<span><a href='pregunta.html'>Preguntas</a></spam>
		<span><a href='creditos.html'>Creditos</a></spam>
	</nav>
    <section class="main" id="s1">
    <div class="alert-danger"   id="alerta" style="display:none";>
    <strong>Error!</strong> Complete todas las casillas marcadas con *. </div>
	<div class="alert-danger"   id="alerta1" style="display:none";>
    <strong>Error!</strong> Pregunta demasiado breve (min 20). </div>
	<div class="alert-danger"   id="alerta2" style="display:none";>
    <strong>Error!</strong> El formato del correo es incorrecto. </div>
	
	<div>
	
	<form  id='fpreguntas' name='fpreguntas' action='prueba.php' enctype="multipart/form-data">

    <div>
        Direccion de correo(*):<br><input type="text" name="correo" id="correo"/>
    </div>
    <div>
        Pregunta(*):<br><input type="text" name="pregunta" id="pregunta"/>
    </div>
    <div>
        Respuesta correcta(*):<br><input type="text" name="correcta" id="correcta"/>
    </div>
    <div>
        Respuesta incorrecta 1(*):<br><input type="text" name="incorrecta1" id="incorrecta1"/>
    </div>
	<div>
        Respuesta incorrecta 2(*):<br><input type="text" name="incorrecta2" id="incorrecta2"/>
    </div>
	<div>
        Respuesta incorrecta 3(*):<br><input type="text" name="incorrecta3" id="incorrecta3"/>
    </div>
	<div>
        Tema de la pregunta (*):<br><input type="text" name="tema" id="tema"/>
    </div>
	<div>
		
		Complejidad:<select id="complejidad" name="complejidad">
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
		</select>
	</div>
	<div>
	<input type="file" name="archivo" id="archivo"/><br />
	<input type=button onclick='crear_img()' value="Ver imagen" id="crear_img">
	</div>
	<div>
		<br /><input type="submit" value="Registrar pregunta" id="boton">
	</div>
	</form>
	</div>
    </section>
	<footer class='main' id='f1'>
		<p><a href="http://es.wikipedia.org/wiki/Quiz" target="_blank">Que es un Quiz?</a></p>
		<a href='https://github.com'>Link GITHUB</a>
	</footer>
</div>
<script> 
//El boton enviar
$('#boton').click(function() { 
    //valores de los input 
var correo=$('#correo').val(); 
var pregunta=$('#pregunta').val();
var correcta=$('#correcta').val();
var incorrecta1=$('#incorrecta1').val();
var incorrecta2=$('#incorrecta2').val();
var incorrecta3=$('#incorrecta3').val();
var tema=$('#tema').val();
var complejidad=$('#complejidad').val();
	//expresiones regulares 
var val_no_vacio=/^\s*$/ //para campos obligatorios
var val_pregunta=/^[\s\S]{10,50}$/ //pregunta minimo 20
var val_correo=/^[a-z]+\d{3}@ikasle\.ehu\.(es|eus)$/; 
 
    if (correo.match(val_no_vacio) || pregunta.match(val_no_vacio) || correcta.match(val_no_vacio)  
	|| incorrecta1.match(val_no_vacio)  || incorrecta2.match(val_no_vacio)  || incorrecta3.match(val_no_vacio)) { 
	document.getElementById("alerta").style.display = 'block';
	return false;	
    }
	else document.getElementById("alerta").style.display = 'none';
	
	if (!correo.match(val_correo)) 
	{ 
	document.getElementById("alerta2").style.display = 'block';	
	return false;
    } 
	else 
	document.getElementById("alerta2").style.display = 'none';
	
	
	if (!pregunta.match(val_pregunta)) 
	{ 
	document.getElementById("alerta1").style.display = 'block';
	return false;
		
    }
	else document.getElementById("alerta1").style.display = 'none'; 

	return true;
}); 

</script> 
</body>
</html>
